(this.webpackJsonpgroupchat=this.webpackJsonpgroupchat||[]).push([[0],{47:function(e,t,n){e.exports=n(99)},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},87:function(e,t){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(6),c=n.n(r),s=n(1),l=n(4),o=n(38),u=n(7),m=n(9),d={isSignedIn:null},g=Object(l.c)({messageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;return"RECIEVE_MESSAGE"===t.type?Object(m.a)({},e,{messages:[].concat(Object(u.a)(e.messages),[t.payload])}):e},profileReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(m.a)({},e,{isSignedIn:!0},t.payload);case"SIGN_AS_GUEST":return Object(m.a)({},e,{isSignedIn:!1},t.payload);default:return e}},userListReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{usersList:[]},t=arguments.length>1?arguments[1]:void 0;return"UPDATE_USERS_LIST"===t.type?Object(m.a)({},e,{usersList:Object(u.a)(t.payload)}):e}}),p=(n(56),n(57),n(12)),f=(n(58),n(59),n(39)),h=n.n(f)()("wss://chatsocket490.herokuapp.com"),v=n(40),E=n.n(v),b=Object(s.b)((function(e){var t=e.userListReducer;return{userList:Object(u.a)(t.usersList)}}),{updateUsersList:function(e){return{type:"UPDATE_USERS_LIST",payload:e}}})((function(e){var t=e.userList,n=e.updateUsersList;Object(a.useEffect)((function(){h.on("userListHasChanged",(function(e){n(e)}))}),[n]);var r=Object(a.useState)(!1),c=Object(p.a)(r,2),s=c[0],l=c[1],o=function(){l(!0)},u=function(){l(!1)};return i.a.createElement("div",{className:"ui side-bar segment"},i.a.createElement("button",{className:"header"},"Users in chat:"),t.map((function(e){var t=function(e){var t=h.id===e.socketID;return"".concat(t?"youspan":""," logged-usr")}(e);return i.a.createElement("button",{key:e.id,className:t,onClick:o},e.username)})),i.a.createElement(E.a,{initWidth:800,initHeight:400,onFocus:function(){return console.log("Modal is clicked")},className:"my-modal-custom-class",onRequestClose:u,isOpen:s},i.a.createElement(G,{privateChat:!0}),i.a.createElement("button",{onClick:u},"Close modal")))})),N=(n(93),n(94),function(e){var t=e.messageDate,n=e.image,a=e.name,r=e.text,c=e.mediaContent,s=t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" @ "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();return i.a.createElement("div",{className:"comment"},i.a.createElement("div",{className:"content"},""===n?null:i.a.createElement("div",{className:"avatar"},i.a.createElement("img",{src:n,alt:""})),i.a.createElement("a",{className:"author",href:"www.walla.com"},a),i.a.createElement("div",{className:"metadata"},i.a.createElement("div",null,s)),i.a.createElement("div",{className:"text"},i.a.createElement("p",null,r),i.a.createElement("p",null,null!==c?i.a.createElement("img",{alt:"Media Content",height:"60",src:function(e){var t=new Blob([e],{type:"image/jpeg"});return(window.URL||window.webkitURL).createObjectURL(t)}(c)}):null))))}),y=Object(s.b)((function(e){return{messages:Object(u.a)(e.messageReducer.messages)}}),{recieveMessage:function(e){return{type:"RECIEVE_MESSAGE",payload:e}}})((function(e){var t=e.recieveMessage,n=e.messages,r=e.privateChat;Object(a.useEffect)((function(){r||h.on("viewMessage",(function(e){return t(e)}))}),[t,r]),Object(a.useEffect)((function(){c()}),[n]);var c=function(){var e=document.querySelector(".comments");null!==e&&(e.scrollTop=e.scrollHeight)};return i.a.createElement("div",{className:"ui comments segment container"},n.map((function(e,t){return"string"===typeof e?i.a.createElement(N,{key:t,name:"",date:new Date,text:e}):i.a.createElement(N,{key:t,name:e.senderName,messageDate:new Date(e.date),text:e.text,image:e.image,mediaContent:e.mediaContent})})))})),O=function(e){var t=e.privateChat,n=Object(a.useRef)(null),r=Object(a.useRef)(null);return i.a.createElement("div",{className:"ui top-view"},t?null:i.a.createElement("div",{ref:n,className:"side-bar-view"},i.a.createElement(b,null)),i.a.createElement("div",{className:"chat-view"},i.a.createElement("div",{ref:r,className:"open-side-bar",onClick:function(){return function(e,t){var n=t.current.querySelector(".left"),a=t.current.querySelector(".right");e.current.style.width?(e.current.style.width=null,e.current.style.visibility=null):(e.current.style.visibility="visible",e.current.style.width="40%"),n.classList.toggle("hidden"),a.classList.toggle("hidden")}(n,r)}},i.a.createElement("i",{className:"angle double right icon"}),i.a.createElement("i",{className:"angle double left icon hidden"}),i.a.createElement("i",{className:"clipboard list icon"})),i.a.createElement(y,{private:t})))},S=(n(95),n(41)),w=n.n(S),C=Object(s.b)((function(e){return{userProfile:e.profileReducer}}))((function(e){var t=e.userProfile,n=e.privateChat,r=Object(a.useState)(null),c=Object(p.a)(r,2),s=c[0],l=c[1];return i.a.createElement("div",{className:"ui input"},i.a.createElement("div",{className:"ui fake-input fluid focus"},i.a.createElement("input",{type:"text",placeholder:"Chat",className:"input-sizing",onKeyPress:function(e){if("Enter"===e.key){var a={senderName:t.username,date:new Date,text:e.target.value,mediaContent:s,image:t.imgURL};e.target.value="",function(e){n||h.emit("subscribeMessage",e)}(a)}}}),null!==s?i.a.createElement("img",{alt:"Media Content",height:"60",src:URL.createObjectURL(s)}):null),i.a.createElement(w.a,{withIcon:!1,buttonText:"Choose images",onChange:function(e){l(e[0])},singleImage:!0,imgExtension:[".jpg",".gif",".png",".gif"],maxFileSize:5242880}))})),j=n(42),I=n(43),k=n(45),L=n(44),R=n(46),U=function(e){var t="";return e.split("").forEach((function(e,n){n%4===0&&(t+=e)})),{socketID:h.id,id:e,username:"Guest ".concat(t),imgURL:"https://previews.123rf.com/images/lineartestpilot/lineartestpilot1908/lineartestpilot190834340/128650855-cartoon-question-mark-with-speech-bubble-in-smooth-gradient-style.jpg"}},_=function(e){return{socketID:h.id,id:e.getId(),username:e.getName(),imgURL:e.getImageUrl()}},A=function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(k.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).onAuthChange=function(e){var t=null;e?(t=_(n.auth.currentUser.get().getBasicProfile()),n.props.signIn(t)):(t=U(n.props.userProfile.socketID),n.props.signAsGuest(t)),h.emit("profileCreated",n.props.userProfile)},n.onSignInClick=function(){n.auth.signIn()},n.onSignOutClick=function(){n.auth.signOut()},n}return Object(R.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.on("connect",(function(){var t=U(h.id);window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"548027089353-j03e14pvp4o81noalqup4e212iscpqlb.apps.googleusercontent.com",scope:"email profile"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance(),e.props.signAsGuest(t),e.onAuthChange(e.auth.isSignedIn.get()),e.auth.isSignedIn.listen(e.onAuthChange)}))}))}))}},{key:"renderAuthButton",value:function(){return null===this.props.userProfile.isSignedIn?i.a.createElement("span",null,"There is some problem with the API"):this.props.userProfile.isSignedIn?i.a.createElement("button",{onClick:this.onSignOutClick,className:"ui red google button"},i.a.createElement("i",{className:"google icon"}),"Sign Out"):i.a.createElement("div",null,i.a.createElement("button",{onClick:this.onSignInClick,className:"ui red google button"},i.a.createElement("i",{className:"google icon"}),"Sign in with Google"))}},{key:"render",value:function(){return i.a.createElement("div",null,this.renderAuthButton())}}]),t}(i.a.Component),D=Object(s.b)((function(e){return{userProfile:e.profileReducer}}),{signIn:function(e){return{type:"SIGN_IN",payload:e}},signAsGuest:function(e){return{type:"SIGN_AS_GUEST",payload:e}}})(A),G=function(e){var t=e.privateChat;return Object(a.useEffect)((function(){return function(){return h.emit("disconnect")}}),[]),i.a.createElement("div",{className:"ui container"},i.a.createElement("div",{className:"ui chat"},i.a.createElement("div",{className:"ui placeholder segment"},i.a.createElement("div",{className:"head-view"},i.a.createElement(O,{privateChat:t})),i.a.createElement("div",{className:"ui divider"}),i.a.createElement("div",{className:"buttom-view"},i.a.createElement("div",{className:"text-area"},i.a.createElement(C,{privateChat:t})),t?null:i.a.createElement("div",{className:"google-auth-area"},i.a.createElement(D,null))))))},M=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,P=Object(l.e)(g,M(Object(l.a)(o.a)));c.a.render(i.a.createElement(s.a,{store:P},i.a.createElement(G,{privateChat:!1})),document.querySelector("#root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.cc25ce66.chunk.js.map