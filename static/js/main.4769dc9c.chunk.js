(this.webpackJsonpgroupchat=this.webpackJsonpgroupchat||[]).push([[0],{44:function(e,t,n){e.exports=n(87)},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},84:function(e,t){},87:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(11),r=n.n(i),s=n(1),u=n(4),o=n(37),l=n(5),d=n(8),m={isSignedIn:null,userId:null},g=Object(u.c)({messageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;return"RECIEVE_MESSAGE"===t.type?Object(d.a)({},e,{messages:[].concat(Object(l.a)(e.messages),[t.payload])}):e},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(d.a)({},e,{isSignedIn:!0,userDetails:t.payload});case"SIGN_OUT":return Object(d.a)({},e,{isSignedIn:!1,userDetails:null});default:return e}},connectionReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{usersConnectedList:[]},t=arguments.length>1?arguments[1]:void 0;return"UPDATE_USERS_LIST"===t.type?Object(d.a)({},e,{usersConnectedList:Object(l.a)(t.payload)}):e},currentSocket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{socket:""},t=arguments.length>1?arguments[1]:void 0;return"SET_SOCKET"===t.type?Object(d.a)({},e,{socket:t.payload}):e}}),p=(n(53),n(54),function(e){var t=e.date.getDate()+"/"+(e.date.getMonth()+1)+"/"+e.date.getFullYear()+" @ "+e.date.getHours()+":"+e.date.getMinutes()+":"+e.date.getSeconds();return c.a.createElement("div",{className:"comment"},c.a.createElement("div",{className:"content"},""===e.image?null:c.a.createElement("div",{className:"avatar"},c.a.createElement("img",{src:e.image,alt:""})),c.a.createElement("a",{className:"author",href:"www.walla.com"},e.name),c.a.createElement("div",{className:"metadata"},c.a.createElement("div",null,t)),c.a.createElement("div",{className:"text"},c.a.createElement("p",null,e.text))))}),h=(n(55),Object(s.b)((function(e){return{userList:Object(l.a)(e.connectionReducer.usersConnectedList),socket:e.currentSocket.socket}}),{updateUsersList:function(e){return{type:"UPDATE_USERS_LIST",payload:e}}})((function(e){var t=e.userList,n=e.updateUsersList,i=e.socket;Object(a.useEffect)((function(){""!==i&&i.on("userListHasChanged",(function(e){n(e)}))}),[n,i]);return c.a.createElement("div",{className:"ui sideBar segment"},c.a.createElement("button",{className:"header"},"Users in chat:"),t.map((function(e){return c.a.createElement("button",{key:e.userid,className:"".concat(i.id===e.userid?"youspan":""," logged-usr")},i.id===e.userid?"You:":""," Guest ",e.username)})))}))),E=Object(s.b)((function(e){return{messages:Object(l.a)(e.messageReducer.messages),socket:e.currentSocket.socket}}),{recieveMessage:function(e){return{type:"RECIEVE_MESSAGE",payload:e}}})((function(e){var t=e.recieveMessage,n=e.messages,i=e.socket;Object(a.useEffect)((function(){""!==i&&i.on("viewMessage",(function(e){return t(e)}))}),[t,i]);return c.a.createElement("div",{className:"ui chat-view"},c.a.createElement(h,null),c.a.createElement("div",{className:"ui fluid comments segment container"},n.map((function(e,t){return"string"===typeof e?c.a.createElement(p,{key:t,name:"",date:new Date,text:e}):c.a.createElement(p,{key:t,name:e.senderName,date:new Date(e.date),text:e.text,image:e.image})}))))})),f=(n(56),Object(s.b)((function(e){return{auth:e.authReducer,socket:e.currentSocket.socket}}))((function(e){var t=e.auth,n=e.socket;return c.a.createElement("div",{className:"ui container fluid focus input"},c.a.createElement("input",{type:"text",placeholder:"Chat",className:"input-sizing",onKeyPress:function(e){if("Enter"===e.key){var a={senderName:t.userDetails?t.userDetails.getName():"Guest",date:new Date,text:e.target.value,image:t.userDetails?t.userDetails.getImageUrl():""};e.target.value="",function(e){n.emit("subscribeMessage",e)}(a)}}}))}))),v=n(38),S=n(39),b=n(42),O=n(40),k=n(43),N=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(b.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(c)))).onAuthChange=function(e){e?n.props.signIn(n.auth.currentUser.get().getBasicProfile()):n.props.signOut()},n.onSignInClick=function(){n.auth.signIn()},n.onSignOutClick=function(){n.auth.signOut()},n}return Object(k.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"548027089353-j03e14pvp4o81noalqup4e212iscpqlb.apps.googleusercontent.com",scope:"email profile"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance(),e.onAuthChange(e.auth.isSignedIn.get()),e.auth.isSignedIn.listen(e.onAuthChange)}))}))}},{key:"renderAuthButton",value:function(){return null===this.props.isSignedIn?c.a.createElement("span",null,"There is some problem with the API"):this.props.isSignedIn?c.a.createElement("button",{onClick:this.onSignOutClick,className:"ui red google button"},c.a.createElement("i",{className:"google icon"}),"Sign Out"):c.a.createElement("div",null,c.a.createElement("button",{onClick:this.onSignInClick,className:"ui red google button"},c.a.createElement("i",{className:"google icon"}),"Sign in with Google"))}},{key:"render",value:function(){return c.a.createElement("div",null,this.renderAuthButton())}}]),t}(c.a.Component),y=Object(s.b)((function(e){return{isSignedIn:e.authReducer.isSignedIn}}),{signIn:function(e){return{type:"SIGN_IN",payload:e}},signOut:function(){return{type:"SIGN_OUT"}}})(N),I=n(41),j=n.n(I),w=Object(s.b)(null,{setCurrentSocket:function(e){return{type:"SET_SOCKET",payload:e}}})((function(e){var t=e.setCurrentSocket;return Object(a.useEffect)((function(){var e=j()("wss://chatsocket490.herokuapp.com");return t(e),function(){e.disconnect()}}),[t]),c.a.createElement("div",{className:"ui container"},c.a.createElement("div",{className:"ui chat"},c.a.createElement("div",{className:"ui placeholder segment"},c.a.createElement(E,null),c.a.createElement("div",{className:"ui divider"}),c.a.createElement(f,null),c.a.createElement(y,null))))})),C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,_=Object(u.e)(g,C(Object(u.a)(o.a)));r.a.render(c.a.createElement(s.a,{store:_},c.a.createElement(w,null)),document.querySelector("#root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.4769dc9c.chunk.js.map