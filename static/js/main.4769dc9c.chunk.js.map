{"version":3,"sources":["reducers/index.js","components/Comment.js","components/SideBar.js","actions/index.js","components/MessageArea.js","components/TextArea.js","components/GoogleAuth.js","components/App.js","index.js"],"names":["INITIAL_STATE","isSignedIn","userId","combineReducers","messageReducer","state","messages","action","type","payload","authReducer","userDetails","connectionReducer","usersConnectedList","currentSocket","socket","Comment","props","date","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","className","image","src","alt","href","name","text","connect","userList","updateUsersList","currentUsersList","useEffect","on","loggedUsers","map","user","key","userid","id","username","recieveMessage","message","ind","Date","senderName","auth","placeholder","onKeyPress","event","getName","target","value","getImageUrl","emit","sendMessage","GoogleAuth","onAuthChange","signIn","currentUser","get","getBasicProfile","signOut","onSignInClick","onSignOutClick","window","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","listen","this","onClick","renderAuthButton","React","Component","setCurrentSocket","openSocket","disconnect","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.4769dc9c.chunk.js","sourcesContent":["import { combineReducers } from \"redux\";\r\n\r\nconst INITIAL_STATE = {\r\n  isSignedIn: null,\r\n  userId: null\r\n};\r\n\r\nconst messageReducer = (state = { messages: [] }, action) => {\r\n  if (action.type === \"RECIEVE_MESSAGE\") {\r\n    return { ...state, messages: [...state.messages, action.payload] };\r\n  }\r\n  return state;\r\n};\r\n\r\nconst connectionReducer = (state = { usersConnectedList: [] }, action) => {\r\n  if (action.type === \"UPDATE_USERS_LIST\") {\r\n    return {\r\n      ...state,\r\n      usersConnectedList: [...action.payload]\r\n    };\r\n  }\r\n  return state;\r\n};\r\n\r\nconst authReducer = (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case \"SIGN_IN\":\r\n      return { ...state, isSignedIn: true, userDetails: action.payload };\r\n    case \"SIGN_OUT\":\r\n      return { ...state, isSignedIn: false, userDetails: null };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst currentSocket = (state = { socket: \"\" }, action) => {\r\n  if (action.type === \"SET_SOCKET\") {\r\n    return { ...state, socket: action.payload };\r\n  }\r\n  return state;\r\n};\r\n\r\nexport default combineReducers({\r\n  messageReducer,\r\n  authReducer,\r\n  connectionReducer,\r\n  currentSocket\r\n});\r\n","import React from \"react\";\r\n\r\nconst Comment = props => {\r\n  const date =\r\n    props.date.getDate() +\r\n    \"/\" +\r\n    (props.date.getMonth() + 1) +\r\n    \"/\" +\r\n    props.date.getFullYear() +\r\n    \" @ \" +\r\n    props.date.getHours() +\r\n    \":\" +\r\n    props.date.getMinutes() +\r\n    \":\" +\r\n    props.date.getSeconds();\r\n\r\n  const renderAvatar = () => {\r\n    if (props.image === \"\") {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className=\"avatar\">\r\n        <img src={props.image} alt=\"\" />\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"comment\">\r\n      <div className=\"content\">\r\n        {renderAvatar()}\r\n        <a className=\"author\" href=\"www.walla.com\">\r\n          {props.name}\r\n        </a>\r\n        <div className=\"metadata\">\r\n          <div>{date}</div>\r\n        </div>\r\n        <div className=\"text\">\r\n          <p>{props.text}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n","import \"../styles/SideBar.css\";\r\nimport React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateUsersList } from \"../actions\";\r\n\r\nconst SideBar = ({ userList, updateUsersList, socket }) => {\r\n  useEffect(() => {\r\n    if (socket !== \"\") {\r\n      socket.on(\"userListHasChanged\", loggedUsers => {\r\n        updateUsersList(loggedUsers);\r\n      });\r\n    }\r\n  }, [updateUsersList, socket]);\r\n\r\n  const renderUserList = () => {\r\n    return userList.map(user => {\r\n      return (\r\n        <button\r\n          key={user.userid}\r\n          className={`${socket.id === user.userid ? \"youspan\" : \"\"} logged-usr`}\r\n        >\r\n          {socket.id === user.userid ? \"You:\" : \"\"} Guest {user.username}\r\n        </button>\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"ui sideBar segment\">\r\n      <button className=\"header\">Users in chat:</button>\r\n      {renderUserList()}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    userList: [...state.connectionReducer.usersConnectedList],\r\n    socket: state.currentSocket.socket\r\n  };\r\n};\r\nexport default connect(\r\n  mapStateToProps,\r\n  { updateUsersList }\r\n)(SideBar);\r\n","export const signIn = userDetails => {\r\n  return {\r\n    type: \"SIGN_IN\",\r\n    payload: userDetails\r\n  };\r\n};\r\n\r\nexport const signOut = () => {\r\n  return {\r\n    type: \"SIGN_OUT\"\r\n  };\r\n};\r\n\r\nexport const recieveMessage = message => {\r\n  return {\r\n    type: \"RECIEVE_MESSAGE\",\r\n    payload: message\r\n  };\r\n};\r\n\r\nexport const updateUsersList = currentUsersList => {\r\n  return {\r\n    type: \"UPDATE_USERS_LIST\",\r\n    payload: currentUsersList\r\n  };\r\n};\r\n\r\nexport const setCurrentSocket = socket => {\r\n  return {\r\n    type: \"SET_SOCKET\",\r\n    payload: socket\r\n  };\r\n};\r\n","import \"../styles/MessageArea.css\";\r\nimport React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { recieveMessage } from \"../actions\";\r\nimport Comment from \"./Comment\";\r\nimport SideBar from \"./SideBar\";\r\n\r\nconst MessageArea = ({ recieveMessage, messages, socket }) => {\r\n  useEffect(() => {\r\n    if (socket !== \"\") {\r\n      socket.on(\"viewMessage\", message => recieveMessage(message));\r\n    }\r\n  }, [recieveMessage, socket]);\r\n\r\n  const renderComments = () => {\r\n    return messages.map((message, ind) => {\r\n      if (typeof message === \"string\") {\r\n        return <Comment key={ind} name={\"\"} date={new Date()} text={message} />;\r\n      }\r\n      return (\r\n        <Comment\r\n          key={ind}\r\n          name={message.senderName}\r\n          date={new Date(message.date)}\r\n          text={message.text}\r\n          image={message.image}\r\n        />\r\n      );\r\n    });\r\n  };\r\n  return (\r\n    <div className=\"ui chat-view\">\r\n      <SideBar />\r\n      <div className=\"ui fluid comments segment container\">\r\n        {renderComments()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    messages: [...state.messageReducer.messages],\r\n    socket: state.currentSocket.socket\r\n  };\r\n};\r\nexport default connect(\r\n  mapStateToProps,\r\n  { recieveMessage }\r\n)(MessageArea);\r\n","import \"../styles/TextArea.css\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst TextArea = ({ auth, socket }) => {\r\n  const sendMessage = message => {\r\n    socket.emit(\"subscribeMessage\", message);\r\n  };\r\n  const onSubmit = event => {\r\n    if (event.key === \"Enter\") {\r\n      const message = {\r\n        senderName: auth.userDetails ? auth.userDetails.getName() : \"Guest\",\r\n        date: new Date(),\r\n        text: event.target.value,\r\n        image: auth.userDetails ? auth.userDetails.getImageUrl() : \"\"\r\n      };\r\n      event.target.value = \"\";\r\n      sendMessage(message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"ui container fluid focus input\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Chat\"\r\n        className=\"input-sizing\"\r\n        onKeyPress={onSubmit}\r\n      />\r\n    </div>\r\n  );\r\n};\r\nconst mapStateToProps = state => {\r\n  return { auth: state.authReducer, socket: state.currentSocket.socket };\r\n};\r\nexport default connect(mapStateToProps)(TextArea);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { signIn, signOut } from \"../actions\";\r\n\r\nclass GoogleAuth extends React.Component {\r\n  componentDidMount() {\r\n    window.gapi.load(\"client:auth2\", () => {\r\n      window.gapi.client\r\n        .init({\r\n          clientId:\r\n            \"548027089353-j03e14pvp4o81noalqup4e212iscpqlb.apps.googleusercontent.com\",\r\n          scope: \"email profile\"\r\n        })\r\n        .then(() => {\r\n          this.auth = window.gapi.auth2.getAuthInstance();\r\n          this.onAuthChange(this.auth.isSignedIn.get());\r\n          this.auth.isSignedIn.listen(this.onAuthChange);\r\n        });\r\n    });\r\n  }\r\n  onAuthChange = isSignedIn => {\r\n    if (isSignedIn) {\r\n      this.props.signIn(this.auth.currentUser.get().getBasicProfile());\r\n    } else {\r\n      this.props.signOut();\r\n    }\r\n  };\r\n\r\n  onSignInClick = () => {\r\n    this.auth.signIn();\r\n  };\r\n\r\n  onSignOutClick = () => {\r\n    this.auth.signOut();\r\n  };\r\n  renderAuthButton() {\r\n    if (this.props.isSignedIn === null) {\r\n      return <span>There is some problem with the API</span>;\r\n    } else if (this.props.isSignedIn) {\r\n      return (\r\n        <button onClick={this.onSignOutClick} className=\"ui red google button\">\r\n          <i className=\"google icon\" />\r\n          Sign Out\r\n        </button>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <button onClick={this.onSignInClick} className=\"ui red google button\">\r\n            <i className=\"google icon\" />\r\n            Sign in with Google\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  render() {\r\n    return <div>{this.renderAuthButton()}</div>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return { isSignedIn: state.authReducer.isSignedIn };\r\n};\r\nexport default connect(\r\n  mapStateToProps,\r\n  { signIn, signOut }\r\n)(GoogleAuth);\r\n","import \"../styles/App.css\";\r\nimport React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setCurrentSocket } from \"../actions\";\r\nimport MessageArea from \"./MessageArea\";\r\nimport TextArea from \"./TextArea\";\r\nimport GoogleAuth from \"./GoogleAuth\";\r\nimport openSocket from \"socket.io-client\";\r\n\r\nconst App = ({ setCurrentSocket }) => {\r\n  useEffect(() => {\r\n    const socket = openSocket(\"wss://chatsocket490.herokuapp.com\");\r\n    setCurrentSocket(socket);\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [setCurrentSocket]);\r\n  return (\r\n    <div className=\"ui container\">\r\n      <div className=\"ui chat\">\r\n        <div className=\"ui placeholder segment\">\r\n          <MessageArea />\r\n          <div className=\"ui divider\"></div>\r\n          <TextArea />\r\n          <GoogleAuth />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  { setCurrentSocket }\r\n)(App);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware, compose } from \"redux\";\r\nimport reduxThunk from \"redux-thunk\";\r\n\r\nimport reducers from \"./reducers\"; // default going to index.js\r\nimport App from \"./components/App\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n  reducers,\r\n  composeEnhancers(applyMiddleware(reduxThunk))\r\n);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.querySelector(\"#root\")\r\n);\r\n"],"sourceRoot":""}